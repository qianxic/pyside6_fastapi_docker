# 遥感影像变化检测系统使用手册

## 一、系统概述

### 1.1 软件简介
遥感影像变化检测系统是一个基于深度学习的智能遥感影像分析平台，采用前后端分离架构设计。系统支持图像版和影像版两种工作模式，能够自动识别和分析遥感影像中的变化信息。

### 1.2 主要功能
- **变化检测**：单图像和栅格影像变化检测
- **批量处理**：大规模影像对批量分析
- **多格式支持**：PNG、JPG、TIFF、GeoTIFF等格式
- **地理信息保持**：栅格影像地理坐标系统维护
- **结果导出**：支持多种格式的结果导出

### 1.3 系统要求
- **操作系统**：Windows 10+、Ubuntu 20.04+、macOS 10.15+
- **Python版本**：3.10+
- **内存**：8GB+（推荐16GB+）
- **GPU**：NVIDIA GPU + CUDA 12.6（推荐）
- **存储空间**：至少10GB可用空间

## 二、系统安装

### 2.1 环境准备

#### 2.1.1 安装Python
```bash
# 下载并安装Python 3.10+
# 访问 https://www.python.org/downloads/
# 选择Python 3.10或更高版本
```

#### 2.1.2 安装Docker（可选）
```bash
# Windows/macOS
# 下载Docker Desktop: https://www.docker.com/products/docker-desktop

# Ubuntu
sudo apt update
sudo apt install docker.io docker-compose
```

### 2.2 系统部署

#### 2.2.1 克隆项目
```bash
git clone <repository-url>
cd 遥感影像变化检测系统V1.0
```

#### 2.2.2 启动后端服务
```bash
cd change3d_api_docker
docker-compose -f docker-compose.optimized.yml up --build -d
```

#### 2.2.3 启动前端应用
```bash
cd ..
pip install -r requirements.txt
python start_app.py
```

## 三、基本操作

### 3.1 启动系统

#### 3.1.1 启动步骤
1. 确保后端API服务运行在 `http://localhost:8000`
2. 运行前端应用程序
3. 系统启动后显示主界面

#### 3.1.2 界面布局
系统采用四区域布局设计：
- **左上区域**：前时相影像显示
- **右上区域**：后时相影像显示
- **左下区域**：变化检测结果
- **右下区域**：处理日志信息

### 3.2 工作模式选择

#### 3.2.1 图像版模式
- **适用场景**：普通图像的变化检测
- **支持格式**：PNG、JPG、JPEG
- **特点**：处理速度快，适合一般图像分析

#### 3.2.2 影像版模式
- **适用场景**：栅格影像的地理信息保持检测
- **支持格式**：TIFF、GeoTIFF、IMG、DEM、HGT
- **特点**：保持地理坐标信息，适合专业GIS应用

### 3.3 文件导入

#### 3.3.1 导入前时相影像
1. 点击"导入前时相影像"按钮
2. 选择较早时期的影像文件
3. 系统自动加载并显示图像

#### 3.3.2 导入后时相影像
1. 点击"导入后时相影像"按钮
2. 选择较新时期的影像文件
3. 系统自动加载并显示图像

#### 3.3.3 拖拽导入
- 支持直接拖拽文件到对应区域
- 支持批量文件拖拽导入

## 四、变化检测操作

### 4.1 单图像变化检测

#### 4.1.1 操作步骤
1. 选择"图像版"工作模式
2. 导入前时相和后时相图像
3. 点击"开始解译"按钮
4. 等待AI算法处理完成
5. 查看检测结果

#### 4.1.2 参数设置
- **检测阈值**：调整变化检测敏感度
- **输出格式**：选择结果图像格式
- **质量设置**：选择处理质量级别

### 4.2 栅格影像变化检测

#### 4.2.1 操作步骤
1. 选择"影像版"工作模式
2. 导入前时相和后时相栅格影像
3. 点击"开始解译"按钮
4. 等待AI算法处理完成
5. 查看检测结果和矢量数据

#### 4.2.2 地理信息设置
- **坐标系统**：自动识别或手动设置
- **投影参数**：设置地图投影参数
- **输出格式**：选择栅格或矢量输出

### 4.3 结果查看

#### 4.3.1 图像显示
- **缩放操作**：鼠标滚轮缩放图像
- **平移操作**：鼠标拖拽平移图像
- **区域选择**：矩形框选择感兴趣区域

#### 4.3.2 结果分析
- **变化统计**：显示变化像素数量和百分比
- **变化类型**：识别不同类型的变化
- **置信度**：显示检测结果置信度

## 五、批量处理

### 5.1 批量任务配置

#### 5.1.1 输入目录设置
1. 点击"批量处理"按钮
2. 选择输入目录（包含影像对的文件夹）
3. 确认目录结构正确

#### 5.1.2 输出目录设置
1. 选择结果输出目录
2. 设置输出文件命名规则
3. 确认输出格式设置

### 5.2 批量任务执行

#### 5.2.1 任务启动
1. 配置完成后点击"开始批量处理"
2. 系统自动添加任务到队列
3. 开始并发处理任务

#### 5.2.2 进度监控
- **进度条**：显示整体处理进度
- **任务状态**：显示当前任务状态
- **日志信息**：实时显示处理日志

### 5.3 结果管理

#### 5.3.1 结果查看
- **批量结果**：查看所有处理结果
- **统计报告**：生成批量处理统计报告
- **错误日志**：查看处理失败的任务

#### 5.3.2 结果导出
- **图像格式**：PNG、JPG、TIFF
- **矢量格式**：Shapefile、GeoJSON
- **统计报告**：Excel、CSV格式

## 六、高级功能

### 6.1 图像预处理

#### 6.1.1 图像增强
- **对比度调整**：调整图像对比度
- **亮度调整**：调整图像亮度
- **噪声去除**：去除图像噪声

#### 6.1.2 几何校正
- **几何变换**：图像几何校正
- **配准处理**：图像配准对齐
- **重采样**：图像重采样处理

### 6.2 参数优化

#### 6.2.1 模型参数
- **学习率**：调整模型学习率
- **批次大小**：设置处理批次大小
- **迭代次数**：设置训练迭代次数

#### 6.2.2 检测参数
- **检测阈值**：调整变化检测阈值
- **最小区域**：设置最小变化区域
- **形态学操作**：设置形态学处理参数

### 6.3 结果后处理

#### 6.3.1 结果优化
- **噪声过滤**：过滤检测结果中的噪声
- **形态学处理**：形态学开闭运算
- **区域合并**：合并相邻变化区域

#### 6.3.2 结果验证
- **精度评估**：评估检测结果精度
- **混淆矩阵**：生成混淆矩阵
- **统计报告**：生成详细统计报告

## 七、系统配置

### 7.1 界面设置

#### 7.1.1 主题切换
- **深色主题**：适合夜间使用
- **浅色主题**：适合白天使用
- **自动切换**：根据系统时间自动切换

#### 7.1.2 布局调整
- **窗口大小**：调整主窗口大小
- **区域比例**：调整四区域显示比例
- **工具栏**：显示/隐藏工具栏

### 7.2 性能设置

#### 7.2.1 GPU设置
- **GPU选择**：选择使用的GPU设备
- **内存限制**：设置GPU内存使用限制
- **并行处理**：设置并行处理数量

#### 7.2.2 内存管理
- **内存限制**：设置系统内存使用限制
- **缓存清理**：手动清理系统缓存
- **自动清理**：设置自动清理策略

### 7.3 存储设置

#### 7.3.1 路径配置
- **临时目录**：设置临时文件存储路径
- **结果目录**：设置结果文件存储路径
- **日志目录**：设置日志文件存储路径

#### 7.3.2 文件管理
- **自动清理**：设置自动清理策略
- **备份设置**：设置文件备份策略
- **压缩设置**：设置文件压缩策略

## 八、故障排除

### 8.1 常见问题

#### 8.1.1 启动问题
**问题**：系统无法启动
**解决方案**：
1. 检查Python版本是否为3.10+
2. 确认所有依赖包已正确安装
3. 检查后端API服务是否正常运行
4. 查看错误日志获取详细信息

#### 8.1.2 GPU问题
**问题**：GPU不可用或性能异常
**解决方案**：
1. 检查NVIDIA驱动是否正确安装
2. 确认CUDA版本兼容性
3. 检查GPU内存是否充足
4. 尝试使用CPU模式运行

#### 8.1.3 内存问题
**问题**：内存不足导致处理失败
**解决方案**：
1. 关闭其他占用内存的程序
2. 减小处理图像尺寸
3. 调整批次大小设置
4. 增加系统虚拟内存

### 8.2 性能优化

#### 8.2.1 处理速度优化
- 使用GPU加速处理
- 调整批次大小参数
- 优化图像预处理流程
- 使用并行处理模式

#### 8.2.2 内存使用优化
- 及时清理临时文件
- 使用流式处理大文件
- 优化数据加载策略
- 设置合理的内存限制

### 8.3 技术支持

#### 8.3.1 日志分析
- **系统日志**：查看系统运行日志
- **错误日志**：查看错误详细信息
- **性能日志**：查看性能监控数据

#### 8.3.2 联系支持
- **技术支持邮箱**：support@rsiis.com
- **问题反馈**：通过系统反馈功能
- **文档更新**：查看最新使用文档

## 九、最佳实践

### 9.1 数据准备

#### 9.1.1 图像质量要求
- **分辨率**：建议使用高分辨率图像
- **格式**：使用无损压缩格式
- **配准**：确保两时相图像配准准确
- **光照**：尽量选择光照条件相似的图像

#### 9.1.2 数据组织
- **文件命名**：使用规范的命名规则
- **目录结构**：建立清晰的目录结构
- **元数据**：保存完整的元数据信息
- **备份**：定期备份重要数据

### 9.2 处理流程

#### 9.2.1 标准流程
1. **数据检查**：检查输入数据质量
2. **预处理**：进行必要的预处理
3. **参数设置**：根据数据特点设置参数
4. **执行检测**：运行变化检测算法
5. **结果验证**：验证检测结果质量
6. **后处理**：进行结果优化处理
7. **结果导出**：导出最终结果

#### 9.2.2 质量控制
- **精度评估**：定期评估检测精度
- **结果验证**：与实地数据对比验证
- **参数优化**：根据验证结果优化参数
- **流程改进**：持续改进处理流程

### 9.3 效率提升

#### 9.3.1 批量处理优化
- **任务分组**：合理分组批量任务
- **资源调度**：优化资源使用调度
- **并行处理**：充分利用并行处理能力
- **结果管理**：建立结果管理体系

#### 9.3.2 工作流程优化
- **模板化**：建立标准化处理模板
- **自动化**：实现处理流程自动化
- **监控化**：建立处理过程监控
- **文档化**：完善操作文档记录

---

**手册版本**：V1.0
**创建日期**：2025年8月31日
**更新日期**：2025年8月31日
**技术支持**：support@rsiis.com
